import"./index-rgAw43f9.js";import{m as L,a as d,j as c,b as l,d as D,n as _,k as W,t as S,r as g,c as m,l as x,u as j,F as B,e as V}from"./index-BlmP_x2W.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as p}from"./dayjs.min-yA6d0oLc.js";import{i as U,a as z,b as K,c as X,d as Z,g as q,e as G,f as J}from"./_getTag-Dr2gTbI9.js";import"./_commonjsHelpers-CqkleIqs.js";var Q="[object Map]",ee="[object Set]",te=Object.prototype,ae=te.hasOwnProperty;function k(t){if(t==null)return!0;if(U(t)&&(z(t)||typeof t=="string"||typeof t.splice=="function"||K(t)||X(t)||Z(t)))return!t.length;var r=q(t);if(r==Q||r==ee)return!t.size;if(G(t))return!J(t).length;for(var e in t)if(ae.call(t,e))return!1;return!0}const re={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"};function oe(t,r){return c(),d("svg",re,[...r[0]||(r[0]=[l("path",{fill:"currentColor",d:"M164.24 203.76a6 6 0 1 1-8.48 8.48l-80-80a6 6 0 0 1 0-8.48l80-80a6 6 0 0 1 8.48 8.48L88.49 128Z"},null,-1)])])}const le=L({name:"ph-caret-left-light",render:oe}),se={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"};function ne(t,r){return c(),d("svg",se,[...r[0]||(r[0]=[l("path",{fill:"currentColor",d:"m180.24 132.24l-80 80a6 6 0 0 1-8.48-8.48L167.51 128L91.76 52.24a6 6 0 0 1 8.48-8.48l80 80a6 6 0 0 1 0 8.48"},null,-1)])])}const ie=L({name:"ph-caret-right-light",render:ne}),de=["data-date"],ce=D({__name:"CalendarCell",props:{selectedDate:{},dateObj:{},holidayColor:{},showBarColor:{}},emits:["date-select"],setup(t,{emit:r}){const e=t,o=r,a=(n,s)=>{const i=n.currentTarget;i&&s&&o("date-select",`${i.dataset.date}`)};return(n,s)=>(c(),d("div",{class:_(["date-col relative h-0 w-1/7 pt-[calc(100%/6)] text-gray-300 select-none md:pt-[calc(100%/10)]",{"in-view":e.dateObj.isInView,"date-selected":e.selectedDate===e.dateObj.fullDateText}]),"data-date":e.dateObj.fullDateText,onClick:s[0]||(s[0]=i=>a(i,e.dateObj.isInView))},[l("div",{class:_(["date-content",[{"show-bar":e.dateObj.shouldShowBar},{holiday:e.dateObj.isHoliday}]]),style:W({"--base-cal_holiday-color":e.holidayColor,"--base-cal_show-bar-color":e.showBarColor})},S(e.dateObj.briefDateText),7)],10,de))}}),ue=I(ce,[["__scopeId","data-v-25343817"]]),fe={en:[{full:"SUN",brief:"SUN"},{full:"MON",brief:"MON"},{full:"TUE",brief:"TUE"},{full:"WEN",brief:"WEN"},{full:"THU",brief:"THU"},{full:"FRI",brief:"FRI"},{full:"SAT",brief:"SAT"}]},me={class:"mb-4 w-full overflow-hidden rounded-md shadow-md select-none md:mb-0"},he={class:"calender-header flex min-h-[3.2rem] w-full items-center justify-between bg-[#80808014] px-3 text-lg"},pe={class:"p-1"},ye={class:"flex flex-wrap"},be=["data-full","data-brief"],ve={class:"relative flex flex-wrap"},xe=42,_e=D({name:"BaseCalendar",__name:"index",props:{modelValue:{default:void 0},minDate:{default:void 0},maxDate:{default:void 0},defaultMaxYearToRender:{default:1},holidayList:{default:()=>[]},showBarList:{default:()=>[]},dateStrFormat:{default:"YYYY/MM/DD"},weekdayTextList:{default:()=>fe.en},calendarHeaderText:{default:"YYYY / MM"},holidayColor:{default:"#ff9600"},showBarColor:{default:"#aabbcc"},startOfWeek:{default:0}},emits:["update:modelValue"],setup(t,{emit:r}){const e=t,o=e.minDate?p(e.minDate):k(e.modelValue)?p():p(e.modelValue);let a=g(o.startOf("month"));const n=e.minDate?o:o.subtract(e.defaultMaxYearToRender,"year"),s=e.maxDate?p(e.maxDate):o.add(e.defaultMaxYearToRender,"year");if(!e.minDate&&s.isBefore(o.startOf("day")))throw new Error("maxDate should not be earlier than today if minDate is not provided.");if(s.isBefore(n))throw new Error("maxDate should be greater than minDate. Please check your props.");const i=m(()=>e.modelValue!==void 0),T=g(o.format(e.dateStrFormat)),C=r,h=m({get:()=>i.value?e.modelValue||o.format(e.dateStrFormat):T.value,set:b=>{i.value?C("update:modelValue",b):T.value=b}});i.value&&k(e.modelValue)&&C("update:modelValue",h.value);const E=m(()=>a.value.format(e.calendarHeaderText)),A=m(()=>[...new Array(xe)].map((b,v)=>{const u=(a.value.day()-e.startOfWeek+7)%7,y=v-u,f=a.value.add(y,"day"),$=f.format(e.dateStrFormat),O=f.isSameOrAfter(n,"day")&&f.isSame(a.value,"month")&&f.isSameOrBefore(s),P=e.holidayList.filter(w=>p(w).isSame(f)).length>0,H=e.showBarList.filter(w=>p(w).isSame(f)).length>0;return{fullDateText:$,briefDateText:`${f.date()}`,isInView:O,isHoliday:P,shouldShowBar:O&&H}})),R=m(()=>e.weekdayTextList.slice(e.startOfWeek).concat(e.weekdayTextList.slice(0,e.startOfWeek))),N=m(()=>a.value.isSame(n,"month")),F=m(()=>a.value.isSame(s,"month")),M=()=>{a.value.isSame(s,"month")||(a.value=a.value.add(1,"month"),h.value=a.value.format(e.dateStrFormat))},Y=()=>{if(!a.value.isSame(n,"month")){if(a.value=a.value.subtract(1,"month"),a.value.isSame(n,"month")){h.value=n.format(e.dateStrFormat);return}h.value=a.value.format(e.dateStrFormat)}};return(b,v)=>(c(),d("div",me,[l("div",he,[l("button",{class:_(["prev-btn",{"pointer-events-none opacity-0":N.value}]),onClick:Y},[x(j(le),{width:"20",height:"20"})],2),l("span",null,S(E.value),1),l("button",{class:_(["next-btn",{"pointer-events-none opacity-0":F.value}]),onClick:M},[x(j(ie),{width:"20",height:"20"})],2)]),l("div",pe,[l("div",ye,[(c(!0),d(B,null,V(R.value,({full:u,brief:y})=>(c(),d("div",{key:u,"data-full":u,"data-brief":y,class:"flex w-1/7 items-center justify-center py-3 text-center text-[0.85rem] text-gray-400 select-none before:content-[attr(data-brief)] md:before:content-[attr(data-full)]"},null,8,be))),128))]),l("div",ve,[(c(),d(B,null,V(42,u=>x(ue,{key:u,"date-obj":A.value[u-1],"selected-date":h.value,"holiday-color":e.holidayColor,"show-bar-color":e.showBarColor,onDateSelect:v[0]||(v[0]=y=>{h.value=y})},null,8,["date-obj","selected-date","holiday-color","show-bar-color"])),64))])])]))}}),we={class:"w-full"},ge={class:"flex items-center justify-center"},De={class:"my-1 flex justify-center"},Ve=D({name:"DemoCalendar",__name:"Calendar",setup(t){const r=g("");return(e,o)=>(c(),d("div",we,[o[1]||(o[1]=l("h1",{class:"text-center text-lg"},"Calendar 日曆",-1)),l("div",ge,[x(_e,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=a=>r.value=a),class:"my-1 max-w-[18.75rem] md:max-w-[30rem]"},null,8,["modelValue"])]),l("div",De,[l("p",null,"Selected Date 所選日期: "+S(r.value),1)])]))}});export{Ve as default};
