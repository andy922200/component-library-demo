import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-DWt94udo.js";import{m as b,c as u}from"./merge-DWkzUNCg.js";import{d as T,P as L,Q as g,c as v,w as R,o as k,a as s,b as d,n as U,F as h,e as E,t as y,q as w,u as x,y as $,j as o,r as j,l as P}from"./index-BlmP_x2W.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_getTag-Dr2gTbI9.js";var n=(e=>(e.MEMBER="member",e.MOBILE_BARCODE="mobile_barcode",e.DIGITAL_CERTIFICATE="digital_certificate",e.DONATE="donate",e.COMPANY_INVOICE="company_invoice",e.DUPLICATE_UNIFORM_INVOICE="duplicate_uniform_invoice",e.TRIPLICATE_UNIFORM_INVOICE="triplicate_uniform_invoice",e))(n||{});const p={invType:{val:"",isError:!1,isDisabled:!1},invCode:{val:"",isError:!1,isDisabled:!1},invTitle:{val:"",isError:!1,isDisabled:!1},invAddress:{val:"",isError:!1,isDisabled:!1}},m={carrierCode:{label:"載具號碼 Carrier Code",placeholder:"含 / 與7碼大寫英數字",validFunc:e=>/^[/][0-9a-zA-Z+-.]{7}$/.test(e)},certificateNo:{label:"憑證號碼 Certificate No.",placeholder:"2碼大寫英文與14碼數字",validFunc:e=>/^[A-Z]{2}[0-9]{14}$/.test(e)},companyName:{label:"公司抬頭 Company Title",placeholder:"OO科技股份有限公司",validFunc:e=>e.trim().length>0},taxId:{label:"統一編號 Tax ID",placeholder:"12345678",validFunc:e=>/^[0-9]{8}$/.test(e)&&e.trim().length===8},invoiceAddress:{label:"發票地址 Invoice Address",placeholder:"發票詳細地址",validFunc:e=>e.trim().length>0}},I={member:{code:"1",text:"會員載具 Member",param:"member"},mobile_barcode:{code:"2",text:"手機載具 Mobile Barcode",param:"mobile_barcode"},digital_certificate:{code:"3",text:"自然人憑證 Digital Certificate",param:"digital_certificate"},donate:{code:"4",text:"發票捐贈 Donate",param:"donate"},company_invoice:{code:"5",text:"公司發票 Company Invoice",param:"company_invoice"},duplicate_uniform_invoice:{code:"6",text:"二聯式紙本發票 Duplicate Uniform Invoice",param:"duplicate_uniform_invoice"},triplicate_uniform_invoice:{code:"7",text:"三聯式紙本發票 Triplicate Uniform Invoice",param:"triplicate_uniform_invoice"}};Object.fromEntries(Object.entries(I).map(([e,r])=>[r.code,e]));const D=["member","mobile_barcode","digital_certificate","donate","company_invoice"].map(e=>({text:I[e]?.text??"",value:e})),C=["duplicate_uniform_invoice","triplicate_uniform_invoice"].map(e=>({text:I[e]?.text??"",value:e})),S=[...D,...C],G=["company_invoice","triplicate_uniform_invoice"],Z=["company_invoice","duplicate_uniform_invoice","triplicate_uniform_invoice"],q={class:"invoice-info"},H={key:0,class:"pt-2 text-gray-400 md:mt-3"},Q={key:1},Y={class:"mb-4 w-full md:mb-3 md:flex md:items-center"},J={class:"w-full"},K=["value"],W=["value"],X={class:"w-full md:min-h-[90px]"},ee={key:0,class:"md: pt-2 text-sm text-gray-400"},ie=T({__name:"index",props:L({price:{default:0},hasEInvoice:{type:Boolean,default:!0},hasManualInvoice:{type:Boolean,default:!0},isDisabled:{type:Boolean,default:!1}},{modelValue:{default:()=>u(p)},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:r}){const i=g(e,"modelValue"),l=e;r({invoiceData:i});const f=v(()=>l.price===0),M=v(()=>!l.hasEInvoice&&!l.hasManualInvoice),O=v(()=>l.hasEInvoice&&l.hasManualInvoice?S:l.hasEInvoice?D:C),A=v(()=>i.value.invType.val===n.MEMBER?"系統將自動發信至信箱 System will send invoice to payer's email":i.value.invType.val===n.DONATE?"將捐贈給協會 Donate to charity":""),N=v(()=>{const t=[];return i.value.invType.val===n.MOBILE_BARCODE&&t.push({id:"mobile-id",field:"invCode",maxLength:8,...m.carrierCode}),i.value.invType.val===n.DIGITAL_CERTIFICATE&&t.push({id:"citizen-id",field:"invCode",maxLength:16,...m.certificateNo}),G.includes(i.value.invType.val)&&t.push({id:"company-name",field:"invTitle",maxLength:1/0,...m.companyName},{id:"company-id",field:"invCode",maxLength:8,...m.taxId}),Z.includes(i.value.invType.val)&&t.push({id:"address",field:"invAddress",maxLength:100,...m.invoiceAddress}),t}),V=t=>{const c=t.target;i.value=b({},u(p),{invType:{val:c.value}})},B=(t,c)=>{i.value[t].isError=!c};return R(f,t=>{t&&(i.value=u(p))}),k(()=>{i.value=b({},u(p),{invType:{val:l.hasEInvoice?n.MEMBER:n.DUPLICATE_UNIFORM_INVOICE}})}),(t,c)=>(o(),s("div",q,[M.value?(o(),s("div",H,"免開發票 No Invoice")):(o(),s("div",Q,[d("div",Y,[c[0]||(c[0]=d("label",{for:"invoice-type",class:"mb-1 block md:mb-0 md:w-5/12"}," 發票類型 Invoice ",-1)),d("div",J,[d("select",{id:"invoice-type",value:i.value.invType.val,name:"invoice-type",class:U(["select-picker",{disabled:e.isDisabled}]),onChange:V},[(o(!0),s(h,null,E(O.value,a=>(o(),s("option",{key:a.value,value:a.value},y(a.text),9,W))),128))],42,K)])]),d("div",X,[[x(n).MEMBER,x(n).DONATE,""].includes(i.value.invType.val)?(o(),s("div",ee,y(A.value),1)):w("",!0),(o(!0),s(h,null,E(N.value,a=>(o(),$(F,{id:a.id,key:a.id,modelValue:i.value[a.field].val,"onUpdate:modelValue":_=>i.value[a.field].val=_,"is-error":i.value[a.field].isError,"label-name":a.label,placeholder:a.placeholder,disabled:i.value[a.field].isDisabled||l.isDisabled,"max-length":a.maxLength,"validate-func":a.validFunc,onValidate:_=>B(a.field,_)},null,8,["id","modelValue","onUpdate:modelValue","is-error","label-name","placeholder","disabled","max-length","validate-func","onValidate"]))),128))])]))]))}}),ae=z(ie,[["__scopeId","data-v-ad4de848"]]),le={class:"w-full"},te={class:"flex items-center justify-center"},ce=T({name:"DemoInvoiceInfo",__name:"InvoiceInfo",setup(e){const r=j({invType:{val:"",isError:!1,isDisabled:!1},invCode:{val:"",isError:!1,isDisabled:!1},invTitle:{val:"",isError:!1,isDisabled:!1},invAddress:{val:"",isError:!1,isDisabled:!1}});return(i,l)=>(o(),s("div",le,[l[1]||(l[1]=d("h1",{class:"mb-2 text-center text-lg"},"Invoice Info 發票資訊",-1)),d("div",te,[P(ae,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f)},null,8,["modelValue"])])]))}});export{ce as default};
