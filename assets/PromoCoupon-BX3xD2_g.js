import{d as F,P as oe,Q as ne,c as se,a as C,b as r,q as P,t as g,j as b,f as V,h as re,D as Y,F as Z,e as G,n as X,z as K,N as me,r as U,E as he,S as xe,U as J,V as be,W as ye,o as Ce,X as ve,l as z,u,i as Ee,y as Q}from"./index-BlmP_x2W.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as _e}from"./index-BIzckBi9.js";import{m as we,c as R}from"./merge-DWkzUNCg.js";import"./index-rgAw43f9.js";import{d as $}from"./dayjs.min-yA6d0oLc.js";import"./_getTag-Dr2gTbI9.js";import"./_commonjsHelpers-CqkleIqs.js";const De={class:"rounded-lg border-2 border-green-500 bg-green-50 p-6"},Oe={class:"space-y-4"},Ne={class:"flex flex-col gap-1 md:flex-row md:items-center md:gap-4"},Pe={class:"font-mono text-lg font-bold text-orange-600"},Te={class:"flex flex-col gap-1 md:flex-row md:items-center md:gap-4"},Ae={class:"text-gray-900"},Ue={key:0,class:"flex flex-col gap-1 md:flex-row md:items-center md:gap-4"},Re={class:"text-gray-900"},ke={class:"space-y-2"},Se={class:"flex items-center justify-between"},Me={class:"text-lg font-semibold text-gray-900"},Le={class:"flex items-center justify-between"},Be={class:"text-lg font-semibold text-green-600"},$e={class:"border-t-2 border-green-300 pt-2"},He={class:"flex items-center justify-between"},Ve={class:"text-2xl font-bold text-orange-600"},Fe=F({__name:"CheckApplyResult",props:oe({code:{default:""},text:{default:""},isRepeatable:{type:Boolean,default:!1},totalPrice:{default:0},discountValue:{default:0}},{"usage-count":{default:0},"usage-countModifiers":{}}),emits:["update:usage-count"],setup(e){const t=e,n=ne(e,"usage-count"),s=se(()=>(t.totalPrice??0)-(t.discountValue??0));return(o,i)=>(b(),C("div",De,[i[7]||(i[7]=r("div",{class:"mb-4 flex items-center gap-2"},[r("svg",{class:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 16 16"},[r("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})]),r("h3",{class:"text-xl font-bold text-green-800"},"ÂÑ™ÊÉ†Âà∏Â∑≤Â•óÁî® Coupon Applied")],-1)),r("div",Oe,[r("div",Ne,[i[0]||(i[0]=r("span",{class:"font-semibold text-gray-700"},"ÂÑ™ÊÉ†‰ª£Á¢º Code:",-1)),r("span",Pe,g(t.code),1)]),r("div",Te,[i[1]||(i[1]=r("span",{class:"font-semibold text-gray-700"},"ÂÑ™ÊÉ†È°ûÂûã Type:",-1)),r("span",Ae,g(t.text??""),1)]),t.isRepeatable?(b(),C("div",Ue,[i[2]||(i[2]=r("span",{class:"font-semibold text-gray-700"},"‰ΩøÁî®Ê¨°Êï∏ Times:",-1)),r("span",Re,g(n.value)+" Ê¨°",1)])):P("",!0),i[6]||(i[6]=r("div",{class:"border-t-2 border-green-200"},null,-1)),r("div",ke,[r("div",Se,[i[3]||(i[3]=r("span",{class:"text-gray-700"},"ÂéüÂÉπ Original Price:",-1)),r("span",Me,"NT$ "+g(t.totalPrice.toLocaleString()),1)]),r("div",Le,[i[4]||(i[4]=r("span",{class:"text-green-700"},"ÊäòÊâ£ÈáëÈ°ç Discount:",-1)),r("span",Be,"- NT$ "+g((t.discountValue??0).toLocaleString()),1)]),r("div",$e,[r("div",He,[i[5]||(i[5]=r("span",{class:"text-lg font-bold text-gray-900"},"ÂØ¶‰ªòÈáëÈ°ç Final Price:",-1)),r("span",Ve,"NT$ "+g(s.value.toLocaleString()),1)])])])])]))}}),je={class:"coupon-details-area"},ze={class:"mb-6 flex flex-col gap-2 md:flex-row md:items-start"},Ke={class:"md:ml-4"},We={class:"text-lg font-medium text-gray-900"},qe={class:"flex flex-wrap items-center gap-4"},Ye={class:"flex items-center gap-2"},Xe=["disabled"],Ze=["disabled"],Ge=["disabled"],Je=F({__name:"CouponDetails",props:oe({text:{default:""},isRepeatable:{type:Boolean,default:!1},isBindPhone:{type:Boolean,default:!1},remain:{default:0},isDecrementBtnDisabled:{type:Boolean,default:!1},isIncrementBtnDisabled:{type:Boolean,default:!1},isApplyBtnDisabled:{type:Boolean,default:!1},onClickDecrement:{type:Function,default:()=>{}},onClickIncrement:{type:Function,default:()=>{}},onClickApply:{type:Function,default:()=>{}}},{"usage-count":{default:0},"usage-countModifiers":{}}),emits:["update:usage-count"],setup(e){const t=e,n=ne(e,"usage-count");return(s,o)=>(b(),C("div",je,[r("div",ze,[o[4]||(o[4]=r("span",{class:"shrink-0 font-semibold text-gray-700"}," ÂÑ™ÊÉ†ÂÖßÂÆπ Content ",-1)),r("div",Ke,[r("p",We,g(t.text),1)])]),r("div",qe,[o[7]||(o[7]=r("span",{class:"shrink-0 font-semibold text-gray-700"},"‰ΩøÁî®Ê¨°Êï∏ Times",-1)),r("div",Ye,[r("button",{type:"button",disabled:t.isDecrementBtnDisabled,class:"flex h-10 w-10 items-center justify-center rounded-full bg-orange-500 text-white transition-all hover:bg-orange-600 disabled:cursor-not-allowed disabled:bg-gray-300",onClick:o[0]||(o[0]=(...i)=>t.onClickDecrement&&t.onClickDecrement(...i))},[...o[5]||(o[5]=[r("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 16 16"},[r("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),r("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})],-1)])],8,Xe),V(r("input",{"onUpdate:modelValue":o[1]||(o[1]=i=>n.value=i),type:"text",readonly:"",class:"w-16 rounded-lg border-0 bg-white py-2 text-center text-lg font-semibold text-gray-900"},null,512),[[re,n.value,void 0,{number:!0}]]),r("button",{type:"button",disabled:t.isIncrementBtnDisabled,class:"flex h-10 w-10 items-center justify-center rounded-full bg-orange-500 text-white transition-all hover:bg-orange-600 disabled:cursor-not-allowed disabled:bg-gray-300",onClick:o[2]||(o[2]=(...i)=>t.onClickIncrement&&t.onClickIncrement(...i))},[...o[6]||(o[6]=[r("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 16 16"},[r("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),r("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1)])],8,Ze)]),V(r("div",{class:"text-sm text-gray-600"}," Ââ© "+g((t.remain??0)-n.value)+" Ê¨° Remain ",513),[[Y,t.isRepeatable&&!t.isBindPhone]]),r("button",{type:"button",disabled:t.isApplyBtnDisabled,class:"ml-auto rounded-lg bg-orange-500 px-8 py-3 font-semibold text-white shadow-md transition-all hover:bg-orange-600 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500",onClick:o[3]||(o[3]=(...i)=>t.onClickApply&&t.onClickApply(...i))}," Apply ",8,Ge)])]))}}),Qe={class:"debug-info-container rounded-lg border-2 border-blue-300 bg-blue-50 p-6"},et={class:"space-y-6"},tt={class:"rounded-lg bg-white p-4 shadow-sm"},ot={class:"grid gap-3 md:grid-cols-2"},nt={class:"flex flex-col gap-1"},st={class:"font-mono text-gray-900"},rt={class:"flex flex-col gap-1"},it={class:"font-mono text-gray-900"},at={class:"flex flex-col gap-1"},lt={class:"font-mono text-gray-900"},dt={class:"flex flex-col gap-1"},ct={class:"font-semibold text-orange-600"},ut={class:"flex flex-col gap-1"},pt={class:"text-gray-900"},ft={class:"flex flex-col gap-1"},gt={class:"text-gray-900"},mt={key:0,class:"mt-4"},ht={class:"space-y-2"},xt={class:"text-sm text-gray-700"},bt={class:"font-semibold text-gray-900"},yt={key:1,class:"mt-4"},Ct={class:"space-y-2"},vt={class:"flex items-center gap-2 text-sm text-gray-700"},Et={key:0,class:"ml-2 rounded bg-orange-100 px-2 py-0.5 text-xs text-orange-700"},It={class:"rounded-lg bg-white p-4 shadow-sm"},_t={class:"grid gap-3 md:grid-cols-2"},wt={class:"flex flex-col gap-1"},Dt={class:"font-mono text-gray-900"},Ot={class:"flex flex-col gap-1"},Nt={class:"text-gray-900"},Pt={class:"flex flex-col gap-1"},Tt={class:"font-mono text-gray-900"},At={class:"flex flex-col gap-1"},Ut={key:0,class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 16 16"},Rt={key:1,class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 16 16"},kt={class:"rounded-lg bg-white p-4 shadow-sm"},St={class:"flex items-center gap-2"},Mt={class:"inline-flex items-center gap-2 rounded-lg bg-blue-100 px-4 py-2 text-lg font-semibold text-blue-700"},Lt={class:"rounded-lg bg-white p-4 shadow-sm"},Bt={class:"grid gap-3 md:grid-cols-2"},$t={class:"flex flex-col gap-1"},Ht={class:"font-mono text-gray-900"},Vt={class:"flex flex-col gap-1"},Ft=F({__name:"DebugInfo",props:{orderInfo:{},paymentInfo:{},bookingMode:{},passCouponInfo:{}},setup(e){const t=s=>({credit:"‰ø°Áî®Âç° Credit Card",point:"ÈªûÊï∏ Points",coupon:"ÂÑ™ÊÉ†Âà∏ Coupon"})[s]||s,n=s=>({seat:"Â∫ß‰Ωç Seat",event:"Ê¥ªÂãï Event",room:"ÊàøÈñì Room"})[s]||s;return(s,o)=>(b(),C("div",Qe,[o[22]||(o[22]=r("div",{class:"mb-4 flex items-center gap-2"},[r("svg",{class:"h-6 w-6 text-blue-600",fill:"currentColor",viewBox:"0 0 16 16"},[r("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})]),r("h3",{class:"text-xl font-bold text-blue-800"},"Èô§ÈåØË≥áË®ä Debug Info")],-1)),r("div",et,[r("div",tt,[o[9]||(o[9]=r("h4",{class:"mb-3 text-lg font-semibold text-gray-800"},"üì¶ Ë®ÇÂñÆË≥áË®ä Order Info",-1)),r("div",ot,[r("div",nt,[o[0]||(o[0]=r("span",{class:"text-sm font-medium text-gray-600"},"ÊñπÊ°à ID Plan ID:",-1)),r("span",st,g(e.orderInfo.planId||"-"),1)]),r("div",rt,[o[1]||(o[1]=r("span",{class:"text-sm font-medium text-gray-600"},"ÊàøÈñì ID Room ID:",-1)),r("span",it,g(e.orderInfo.roomId||"-"),1)]),r("div",at,[o[2]||(o[2]=r("span",{class:"text-sm font-medium text-gray-600"},"ÊìÅÊúâËÄÖ‰ª£Á¢º Owner Code:",-1)),r("span",lt,g(e.orderInfo.ownerCode||"-"),1)]),r("div",dt,[o[3]||(o[3]=r("span",{class:"text-sm font-medium text-gray-600"},"Á∏ΩÂÉπ Total Price:",-1)),r("span",ct,"NT$ "+g(e.orderInfo.totalPrice.toLocaleString()),1)]),r("div",ut,[o[4]||(o[4]=r("span",{class:"text-sm font-medium text-gray-600"},"È†êË®ÇÂñÆ‰Ωç Booked Unit:",-1)),r("span",pt,g(e.orderInfo.bookedUnit)+" Â∞èÊôÇ",1)]),r("div",ft,[o[5]||(o[5]=r("span",{class:"text-sm font-medium text-gray-600"},"È†êË®ÇÊ®°Âºè Booking Mode:",-1)),r("span",gt,g(n(e.orderInfo.bookingMode)),1)])]),e.orderInfo.priceList.length>0?(b(),C("div",mt,[o[6]||(o[6]=r("span",{class:"mb-2 block text-sm font-medium text-gray-600"},"ÂÉπÊ†ºÊ∏ÖÂñÆ Price List:",-1)),r("div",ht,[(b(!0),C(Z,null,G(e.orderInfo.priceList,(i,d)=>(b(),C("div",{key:d,class:"flex items-center justify-between rounded bg-gray-50 px-3 py-2"},[r("span",xt,"ÂñÆÂÉπ NT$ "+g(i.price)+" √ó "+g(i.unit)+" Â∞èÊôÇ",1),r("span",bt,"NT$ "+g(i.total.toLocaleString()),1)]))),128))])])):P("",!0),e.orderInfo.bookedTimeSlots.length>0?(b(),C("div",yt,[o[8]||(o[8]=r("span",{class:"mb-2 block text-sm font-medium text-gray-600"},"È†êË®ÇÊôÇÊÆµ Time Slots:",-1)),r("div",Ct,[(b(!0),C(Z,null,G(e.orderInfo.bookedTimeSlots,(i,d)=>(b(),C("div",{key:d,class:"rounded bg-gray-50 px-3 py-2"},[r("div",vt,[r("span",null,g(i.startDateTime),1),o[7]||(o[7]=r("span",null,"‚Üí",-1)),r("span",null,g(i.endDateTime),1),i.isCrossDay?(b(),C("span",Et," Ë∑®Êó• Cross Day ")):P("",!0)])]))),128))])])):P("",!0)]),r("div",It,[o[16]||(o[16]=r("h4",{class:"mb-3 text-lg font-semibold text-gray-800"},"üí≥ ‰ªòÊ¨æË≥áË®ä Payment Info",-1)),r("div",_t,[r("div",wt,[o[10]||(o[10]=r("span",{class:"text-sm font-medium text-gray-600"},"‰ªòÊ¨æÈõªË©± Payment Phone:",-1)),r("span",Dt,g(e.paymentInfo.paymentPhone||"-"),1)]),r("div",Ot,[o[11]||(o[11]=r("span",{class:"text-sm font-medium text-gray-600"},"‰ªòÊ¨æÈ°ûÂûã Payment Type:",-1)),r("span",Nt,g(t(e.paymentInfo.paymentType)),1)]),r("div",Pt,[o[12]||(o[12]=r("span",{class:"text-sm font-medium text-gray-600"},"‰ªòÊ¨æÊñπÂºè Pay Way:",-1)),r("span",Tt,g(e.paymentInfo.payWay),1)]),r("div",At,[o[15]||(o[15]=r("span",{class:"text-sm font-medium text-gray-600"},"‰ªòÊ¨æ‰∫∫Ë≥áË®äÂ∑≤Â°´ÂØ´:",-1)),r("span",{class:X(["inline-flex w-fit items-center gap-1 rounded px-2 py-1 text-sm font-semibold",e.paymentInfo.isPaymentPersonFilled?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},[e.paymentInfo.isPaymentPersonFilled?(b(),C("svg",Ut,[...o[13]||(o[13]=[r("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)])])):(b(),C("svg",Rt,[...o[14]||(o[14]=[r("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1)])])),K(" "+g(e.paymentInfo.isPaymentPersonFilled?"ÊòØ Yes":"Âê¶ No"),1)],2)])])]),r("div",kt,[o[18]||(o[18]=r("h4",{class:"mb-3 text-lg font-semibold text-gray-800"},"üéØ È†êË®ÇÊ®°Âºè Booking Mode",-1)),r("div",St,[r("span",Mt,[o[17]||(o[17]=r("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 16 16"},[r("path",{d:"M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"})],-1)),K(" "+g(n(e.bookingMode)),1)])])]),r("div",Lt,[o[21]||(o[21]=r("h4",{class:"mb-3 text-lg font-semibold text-gray-800"},"üé´ Â•óÁ•®ÁãÄÊÖã Coupon State",-1)),r("div",Bt,[r("div",$t,[o[19]||(o[19]=r("span",{class:"text-sm font-medium text-gray-600"},"ÁãÄÊÖã State:",-1)),r("span",Ht,g(e.passCouponInfo.state),1)]),r("div",Vt,[o[20]||(o[20]=r("span",{class:"text-sm font-medium text-gray-600"},"ËºâÂÖ•‰∏≠ Loading:",-1)),r("span",{class:X(["inline-flex w-fit items-center gap-1 rounded px-2 py-1 text-sm font-semibold",e.passCouponInfo.isLoading?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"])},g(e.passCouponInfo.isLoading?"ÊòØ Yes":"Âê¶ No"),3)])])])])]))}}),jt={},zt={class:"flex h-10 w-10 items-center justify-center rounded-full bg-orange-500 text-white"};function Kt(e,t){return b(),C("div",zt,[...t[0]||(t[0]=[r("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)])])}const Wt=Ie(jt,[["render",Kt]]),qt={class:"flex items-center gap-3 rounded-lg bg-orange-50 p-6 text-red-500"},Yt={class:"text-base"},Xt=F({__name:"WarningArea",props:{warnText:{}},setup(e){const t=e;return(n,s)=>(b(),C("div",qt,[s[0]||(s[0]=r("svg",{class:"size-5 shrink-0",fill:"currentColor",viewBox:"0 0 16 16"},[r("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})],-1)),r("span",Yt,g(t.warnText),1)]))}});function Zt(){const e=me({type:"",textKey:"",params:0,isRepeatable:!1,remain:0,maxUse:0,couponUse:0,isBindPhone:!1}),t=U(1);function n(d){Object.assign(e,d),t.value=d.couponUse}function s(){Object.assign(e,{}),t.value=1}function o(){e.type&&(t.value>=e.maxUse||t.value++)}function i(){e.type&&(t.value<=1||t.value--)}return{coupon:he(e),usageCount:t,setCoupon:n,clear:s,increment:o,decrement:i}}async function Gt(e){await new Promise(o=>setTimeout(o,1e3));const t=e.params.COUPON?.toUpperCase()||"";return{result:[{FREE:{type:"0",content:"0",quantity:"1",repeatable:"0",phone:"0",duration:{start:"00:00",end:"24:00"}},FREE2024:{type:"0",content:"0",quantity:"None",repeatable:"0",phone:"0",duration:{start:"00:00",end:"24:00"}},DISCOUNT85:{type:"1",content:"85",quantity:"10",repeatable:"0",phone:"0",duration:{start:"00:00",end:"24:00"}},SALE50:{type:"1",content:"5",quantity:"3",repeatable:"0",phone:"1",duration:{start:"09:00",end:"18:00"}},VIP70:{type:"1",content:"7",quantity:"None",repeatable:"0",phone:"0",duration:"None"},REDUCE100:{type:"2",content:"100",quantity:"15",repeatable:"1",phone:"0",duration:{start:"00:00",end:"24:00"}},SUMMER200:{type:"2",content:"200",quantity:"3",repeatable:"1",phone:"0",duration:{start:"00:00",end:"24:00"}},WELCOME50:{type:"2",content:"50",quantity:"None",repeatable:"0",phone:"1",duration:"None"},HALFHOUR:{type:"3",content:"5",quantity:"999",repeatable:"1",phone:"0",duration:{start:"00:00",end:"24:00"}},HOUR1:{type:"3",content:"10",quantity:"999",repeatable:"1",phone:"0",duration:{start:"00:00",end:"24:00"}},FREETIME2:{type:"3",content:"20",quantity:"999",repeatable:"1",phone:"0",duration:{start:"00:00",end:"24:00"}},FREETIME3:{type:"3",content:"30",quantity:"999",repeatable:"1",phone:"0",duration:{start:"00:00",end:"24:00"}},HALFDAY:{type:"3",content:"40",quantity:"3",repeatable:"0",phone:"1",duration:{start:"10:00",end:"15:00"}},USED2024:"used",EXPIRED:"wrong",NEEDPHONE:"nophone",LIMIT:"limited",BLOCKED:"blocked"}[t]||"wrong"]}}var E=(e=>(e.INITIAL="initial",e.CAN_APPLY="canApply",e.NO_PHONE="noPhone",e.NOT_FOUND="notFound",e.APPLIED="applied",e.INVALID="invalid",e))(E||{}),O=(e=>(e.WRONG="wrong",e.USED="used",e.NO_PHONE="nophone",e.LIMITED="limited",e.BLOCKED="blocked",e))(O||{}),v=(e=>(e.FREE="free",e.DISCOUNT="discount",e.REDUCE_PRICE="reducePrice",e.REDUCE_HOURS="reduceHours",e))(v||{});const ie={0:"free",1:"discount",2:"reducePrice",3:"reduceHours"};Object.fromEntries(Object.entries(ie).map(([e,t])=>[t,Number(e)]));function Jt(){async function e(t){const{result:[n]}=await Gt({params:{OWNER:t.ownerCode,ID:t.roomId,COUPON:t.code,PHONENUM:t.phone,PLANID:t.planId,DATE:t.dates.join("=")}});return typeof n=="string"?n:we({},n,{type:ie[Number(n.type)]})}return{fetchCoupon:e}}var Qt=20,eo=1,k=1e6,ee=1e6,to=-7,oo=21,no=!1,j="[big.js] ",S=j+"Invalid ",W=S+"decimal places",so=S+"rounding mode",ae=j+"Division by zero",f={},N=void 0,ro=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function le(){function e(t){var n=this;if(!(n instanceof e))return t===N&&arguments.length===0?le():new e(t);if(t instanceof e)n.s=t.s,n.e=t.e,n.c=t.c.slice();else{if(typeof t!="string"){if(e.strict===!0&&typeof t!="bigint")throw TypeError(S+"value");t=t===0&&1/t<0?"-0":String(t)}io(n,t)}n.constructor=e}return e.prototype=f,e.DP=Qt,e.RM=eo,e.NE=to,e.PE=oo,e.strict=no,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function io(e,t){var n,s,o;if(!ro.test(t))throw Error(S+"number");for(e.s=t.charAt(0)=="-"?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),o=t.length,s=0;s<o&&t.charAt(s)=="0";)++s;if(s==o)e.c=[e.e=0];else{for(;o>0&&t.charAt(--o)=="0";);for(e.e=n-s-1,e.c=[],n=0;s<=o;)e.c[n++]=+t.charAt(s++)}return e}function M(e,t,n,s){var o=e.c;if(n===N&&(n=e.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(so);if(t<1)s=n===3&&(s||!!o[0])||t===0&&(n===1&&o[0]>=5||n===2&&(o[0]>5||o[0]===5&&(s||o[1]!==N))),o.length=1,s?(e.e=e.e-t+1,o[0]=1):o[0]=e.e=0;else if(t<o.length){if(s=n===1&&o[t]>=5||n===2&&(o[t]>5||o[t]===5&&(s||o[t+1]!==N||o[t-1]&1))||n===3&&(s||!!o[0]),o.length=t,s){for(;++o[--t]>9;)if(o[t]=0,t===0){++e.e,o.unshift(1);break}}for(t=o.length;!o[--t];)o.pop()}return e}function L(e,t,n){var s=e.e,o=e.c.join(""),i=o.length;if(t)o=o.charAt(0)+(i>1?"."+o.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)o="0"+o;o="0."+o}else if(s>0)if(++s>i)for(s-=i;s--;)o+="0";else s<i&&(o=o.slice(0,s)+"."+o.slice(s));else i>1&&(o=o.charAt(0)+"."+o.slice(1));return e.s<0&&n?"-"+o:o}f.abs=function(){var e=new this.constructor(this);return e.s=1,e};f.cmp=function(e){var t,n=this,s=n.c,o=(e=new n.constructor(e)).c,i=n.s,d=e.s,a=n.e,c=e.e;if(!s[0]||!o[0])return s[0]?i:o[0]?-d:0;if(i!=d)return i;if(t=i<0,a!=c)return a>c^t?1:-1;for(d=(a=s.length)<(c=o.length)?a:c,i=-1;++i<d;)if(s[i]!=o[i])return s[i]>o[i]^t?1:-1;return a==c?0:a>c^t?1:-1};f.div=function(e){var t=this,n=t.constructor,s=t.c,o=(e=new n(e)).c,i=t.s==e.s?1:-1,d=n.DP;if(d!==~~d||d<0||d>k)throw Error(W);if(!o[0])throw Error(ae);if(!s[0])return e.s=i,e.c=[e.e=0],e;var a,c,l,h,p,x=o.slice(),_=a=o.length,D=s.length,m=s.slice(0,a),y=m.length,I=e,T=I.c=[],B=0,A=d+(I.e=t.e-e.e)+1;for(I.s=i,i=A<0?0:A,x.unshift(0);y++<a;)m.push(0);do{for(l=0;l<10;l++){if(a!=(y=m.length))h=a>y?1:-1;else for(p=-1,h=0;++p<a;)if(o[p]!=m[p]){h=o[p]>m[p]?1:-1;break}if(h<0){for(c=y==a?o:x;y;){if(m[--y]<c[y]){for(p=y;p&&!m[--p];)m[p]=9;--m[p],m[y]+=10}m[y]-=c[y]}for(;!m[0];)m.shift()}else break}T[B++]=h?l:++l,m[0]&&h?m[y]=s[_]||0:m=[s[_]]}while((_++<D||m[0]!==N)&&i--);return!T[0]&&B!=1&&(T.shift(),I.e--,A--),B>A&&M(I,A,n.RM,m[0]!==N),I};f.eq=function(e){return this.cmp(e)===0};f.gt=function(e){return this.cmp(e)>0};f.gte=function(e){return this.cmp(e)>-1};f.lt=function(e){return this.cmp(e)<0};f.lte=function(e){return this.cmp(e)<1};f.minus=f.sub=function(e){var t,n,s,o,i=this,d=i.constructor,a=i.s,c=(e=new d(e)).s;if(a!=c)return e.s=-c,i.plus(e);var l=i.c.slice(),h=i.e,p=e.c,x=e.e;if(!l[0]||!p[0])return p[0]?e.s=-c:l[0]?e=new d(i):e.s=1,e;if(a=h-x){for((o=a<0)?(a=-a,s=l):(x=h,s=p),s.reverse(),c=a;c--;)s.push(0);s.reverse()}else for(n=((o=l.length<p.length)?l:p).length,a=c=0;c<n;c++)if(l[c]!=p[c]){o=l[c]<p[c];break}if(o&&(s=l,l=p,p=s,e.s=-e.s),(c=(n=p.length)-(t=l.length))>0)for(;c--;)l[t++]=0;for(c=t;n>a;){if(l[--n]<p[n]){for(t=n;t&&!l[--t];)l[t]=9;--l[t],l[n]+=10}l[n]-=p[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--x;return l[0]||(e.s=1,l=[x=0]),e.c=l,e.e=x,e};f.mod=function(e){var t,n=this,s=n.constructor,o=n.s,i=(e=new s(e)).s;if(!e.c[0])throw Error(ae);return n.s=e.s=1,t=e.cmp(n)==1,n.s=o,e.s=i,t?new s(n):(o=s.DP,i=s.RM,s.DP=s.RM=0,n=n.div(e),s.DP=o,s.RM=i,this.minus(n.times(e)))};f.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e};f.plus=f.add=function(e){var t,n,s,o=this,i=o.constructor;if(e=new i(e),o.s!=e.s)return e.s=-e.s,o.minus(e);var d=o.e,a=o.c,c=e.e,l=e.c;if(!a[0]||!l[0])return l[0]||(a[0]?e=new i(o):e.s=o.s),e;if(a=a.slice(),t=d-c){for(t>0?(c=d,s=l):(t=-t,s=a),s.reverse();t--;)s.push(0);s.reverse()}for(a.length-l.length<0&&(s=l,l=a,a=s),t=l.length,n=0;t;a[t]%=10)n=(a[--t]=a[t]+l[t]+n)/10|0;for(n&&(a.unshift(n),++c),t=a.length;a[--t]===0;)a.pop();return e.c=a,e.e=c,e};f.pow=function(e){var t=this,n=new t.constructor("1"),s=n,o=e<0;if(e!==~~e||e<-ee||e>ee)throw Error(S+"exponent");for(o&&(e=-e);e&1&&(s=s.times(t)),e>>=1,!!e;)t=t.times(t);return o?n.div(s):s};f.prec=function(e,t){if(e!==~~e||e<1||e>k)throw Error(S+"precision");return M(new this.constructor(this),e,t)};f.round=function(e,t){if(e===N)e=0;else if(e!==~~e||e<-k||e>k)throw Error(W);return M(new this.constructor(this),e+this.e+1,t)};f.sqrt=function(){var e,t,n,s=this,o=s.constructor,i=s.s,d=s.e,a=new o("0.5");if(!s.c[0])return new o(s);if(i<0)throw Error(j+"No square root");i=Math.sqrt(+L(s,!0,!0)),i===0||i===1/0?(t=s.c.join(""),t.length+d&1||(t+="0"),i=Math.sqrt(t),d=((d+1)/2|0)-(d<0||d&1),e=new o((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+d)):e=new o(i+""),d=e.e+(o.DP+=4);do n=e,e=a.times(n.plus(s.div(n)));while(n.c.slice(0,d).join("")!==e.c.slice(0,d).join(""));return M(e,(o.DP-=4)+e.e+1,o.RM)};f.times=f.mul=function(e){var t,n=this,s=n.constructor,o=n.c,i=(e=new s(e)).c,d=o.length,a=i.length,c=n.e,l=e.e;if(e.s=n.s==e.s?1:-1,!o[0]||!i[0])return e.c=[e.e=0],e;for(e.e=c+l,d<a&&(t=o,o=i,i=t,l=d,d=a,a=l),t=new Array(l=d+a);l--;)t[l]=0;for(c=a;c--;){for(a=0,l=d+c;l>c;)a=t[l]+i[c]*o[l-c-1]+a,t[l--]=a%10,a=a/10|0;t[l]=a}for(a?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e};f.toExponential=function(e,t){var n=this,s=n.c[0];if(e!==N){if(e!==~~e||e<0||e>k)throw Error(W);for(n=M(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return L(n,!0,!!s)};f.toFixed=function(e,t){var n=this,s=n.c[0];if(e!==N){if(e!==~~e||e<0||e>k)throw Error(W);for(n=M(new n.constructor(n),e+n.e+1,t),e=e+n.e+1;n.c.length<e;)n.c.push(0)}return L(n,!1,!!s)};f.toJSON=f.toString=function(){var e=this,t=e.constructor;return L(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])};typeof Symbol<"u"&&(f[Symbol.for("nodejs.util.inspect.custom")]=f.toJSON);f.toNumber=function(){var e=+L(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(j+"Imprecise conversion");return e};f.toPrecision=function(e,t){var n=this,s=n.constructor,o=n.c[0];if(e!==N){if(e!==~~e||e<1||e>k)throw Error(S+"precision");for(n=M(new s(n),e,t);n.c.length<e;)n.c.push(0)}return L(n,e<=n.e||n.e<=s.NE||n.e>=s.PE,!!o)};f.valueOf=function(){var e=this,t=e.constructor;if(t.strict===!0)throw Error(j+"valueOf disallowed");return L(e,e.e<=t.NE||e.e>=t.PE,!0)};var q=le();const ao=({startDatetime:e,endDatetime:t,duration:n})=>{if(!e||!t||!n||!n.start||!n.end)return!1;const{start:s,end:o}=n,i=$(e),d=$(t),a=d.isAfter(i,"day"),c=(D,m,y)=>D.isBetween(m,y,"minute","[]"),l=i.format("YYYY/MM/DD"),[h,p]=[$(`${l} ${s}`),$(`${l} ${o}`)],[x,_]=[$(`${l} ${s}`).add(1,"day"),$(`${l} ${o}`).add(1,"day")];if(a){const D=c(i,h,p),m=c(d,x,_),I=!(s==="00:00"&&o==="24:00")&&i.isSameOrBefore(p)&&d.isSameOrAfter(x);return D&&m&&!I}else return c(i,h,p)&&c(d,h,p)},lo=({couponRes:e,bookingMode:t,startDatetime:n,endDatetime:s})=>(console.log("couponRes",e),!e||e===O.WRONG?{isValid:!1,errorKey:O.WRONG}:e===O.USED?{isValid:!1,errorKey:O.USED}:e===O.NO_PHONE?{isValid:!1,errorKey:"noPhone"}:e===O.LIMITED?{isValid:!1,errorKey:O.LIMITED}:e===O.BLOCKED?{isValid:!1,errorKey:O.BLOCKED}:typeof e=="object"&&e.type===v.REDUCE_HOURS&&["seat","event"].includes(t)?{isValid:!1,errorKey:"not-available-at-seat-or-event"}:typeof e=="object"&&e.duration&&e.duration!=="None"&&!ao({startDatetime:n,endDatetime:s,duration:typeof e.duration=="string"?{start:"",end:""}:e.duration})?{isValid:!1,errorKey:"not-available"}:{isValid:!0});function co({type:e,params:t,couponUse:n,totalPrice:s,bookedPriceList:o,bookedUnit:i}){if(e===v.FREE)return s;if(e===v.DISCOUNT){const d=q(s),a=q(t).div(10);return Math.floor(Number(d.times(q(1).sub(a)).valueOf()))}if(e===v.REDUCE_PRICE)return+t*+n;if(e===v.REDUCE_HOURS){const d=t*n,a=R(o).sort((p,x)=>p.price-x.price);if(i<=d)return o.reduce((p,x)=>p+x.total,0);const c=a.map((p,x,_)=>{const D=_.map(y=>+y.unit).slice(0,x+1).reduce((y,I)=>y+I,0),m=D-n*t;return{...p,last:m,sum:D}});let l=0,h=d;for(let p=0;p<c.length;p++){const x=c[p];if(h<=0)break;const _=Math.min(h,x.unit);h-=_,l+=_*x.price}return l}return s}function uo(e,t=0){switch(e){case v.FREE:return{type:v.FREE,textKey:"free",params:0};case v.DISCOUNT:{const n=String(t);return{type:v.DISCOUNT,textKey:"discount",params:+n.padEnd(2,"0")/10}}case v.REDUCE_PRICE:return{type:v.REDUCE_PRICE,textKey:"reduce-price",params:+t};case v.REDUCE_HOURS:return{type:v.REDUCE_HOURS,textKey:"reduce-hours",params:+t/10};default:return{type:"",textKey:"",params:0}}}function po({couponInfo:e,totalPrice:t,bookedUnit:n,remain:s,isRepeatable:o}){if(!o)return 1;const{type:i,params:d}=e;if(i===v.REDUCE_PRICE){const a=Math.ceil(t/d);return a<s?a:s}if(i===v.REDUCE_HOURS){const a=Math.ceil(+n.toFixed(5)/d);return a<s?a:s}return 1}function fo({type:e,content:t,quantity:n,repeatable:s,phone:o,totalPrice:i,bookedUnit:d}){const a=uo(e,t),c=n==="None"?9999999:+n,l=s==="1",h=po({couponInfo:a,totalPrice:i,bookedUnit:d,remain:c,isRepeatable:l});return{...a,maxUse:h,isRepeatable:l,couponUse:h,remain:c||1,isBindPhone:o==="1"}}const go=R({planId:"",roomId:"",ownerCode:"",totalPrice:0,bookedUnit:0,priceList:[],bookingMode:"",bookedTimeSlots:[]}),mo=R({paymentPhone:"",paymentType:"",payWay:"",isPaymentPersonFilled:!0}),ho=R({state:"initial",isLoading:!1}),te=({type:e,textKey:t,params:n,isInfo:s=!1,isTwOrCn:o=!0})=>{const{t:i}=be.global,d=s?`coupon-info.${t}`:`coupon-type.${t}`;switch(e){case v.DISCOUNT:return i(d,{value:o?n*10%10===0?n:n*10:100-n*10});case v.REDUCE_PRICE:case v.REDUCE_HOURS:return i(d,{value:n});default:return i(d)}},xo=xe("coupon",{state:()=>{const e=U(1),t=U(!1),n=U(""),s=U(!1),o=U(""),i=U({isValid:!0,errMsg:""}),d=R(go),a=Zt();return{step:e,isLoading:t,code:n,noCoupon:s,warnTextKey:o,promoCodeValidation:i,promoCouponCore:a,orderInfo:d,paymentInfo:R(mo),bookingMode:"",passCouponInfo:R(ho)}},getters:{IS_PAY_BY_POINT(e){return e.paymentInfo.paymentType==="point"||e.paymentInfo.payWay==="1"},USED_COUPON_INFO(e){const t=co({type:e.promoCouponCore.coupon?.type??"",params:e.promoCouponCore.coupon?.params??0,couponUse:e.promoCouponCore.usageCount,totalPrice:e.orderInfo.totalPrice,bookedPriceList:e.orderInfo.priceList,bookedUnit:e.orderInfo.bookedUnit});return{...e.promoCouponCore.coupon??{},discountValue:t}},PROMO_COUPON_STATE(e){return e.step===2&&e.promoCouponCore.coupon!==null?E.CAN_APPLY:e.step===2&&e.promoCouponCore.coupon===null&&e.warnTextKey==="noPhone"?E.NO_PHONE:e.step===2&&e.promoCouponCore.coupon===null?E.NOT_FOUND:e.step===3?E.APPLIED:e.passCouponInfo.isLoading?E.INVALID:E.INITIAL},CURRENT_USED_COUPON_TYPE(e){const{IS_ZHTW_OR_ZHCN:t}=J();return te({type:e.promoCouponCore.coupon.type,textKey:e.promoCouponCore.coupon.textKey,params:e.promoCouponCore.coupon.params,isInfo:!1,isTwOrCn:t.value})},CURRENT_USED_COUPON_CONTENT(e){const{IS_ZHTW_OR_ZHCN:t}=J();return te({type:e.promoCouponCore.coupon.type,textKey:e.promoCouponCore.coupon.textKey,params:e.promoCouponCore.coupon.params,isInfo:!0,isTwOrCn:t.value})},CAN_SEARCH(e){return e.passCouponInfo.state!==E.INITIAL||this.PROMO_COUPON_STATE===E.INVALID?!1:!(this.PROMO_COUPON_STATE===E.NO_PHONE&&!e.paymentInfo.isPaymentPersonFilled||this.IS_PAY_BY_POINT)},SHOW_SEARCH_BUTTON(){return[E.INITIAL,E.NO_PHONE,E.INVALID].includes(this.PROMO_COUPON_STATE)},SHOW_CANCEL_BUTTON(){return[E.CAN_APPLY,E.NOT_FOUND,E.APPLIED].includes(this.PROMO_COUPON_STATE)},SHOW_COUPON_DETAIL(e){return e.promoCouponCore.coupon!==null&&!e.noCoupon},IS_INCREMENT_BTN_DISABLED(e){return e.promoCouponCore.usageCount===e.promoCouponCore.coupon?.maxUse||!e.promoCouponCore.coupon?.isRepeatable},IS_DECREMENT_BTN_DISABLED(e){return e.promoCouponCore.usageCount<=1||!e.promoCouponCore.coupon?.isRepeatable}},actions:{initDemo(){this.getOrderInfo(),this.getPaymentInfo(),this.getBookingMode(),this.getPassCouponInfo()},getOrderInfo(){this.orderInfo={planId:"PLAN001",roomId:"ROOM001",ownerCode:"OWNER001",totalPrice:1e3,bookedUnit:4,bookingMode:"room",priceList:[{price:300,unit:2,total:600},{price:200,unit:2,total:400}],bookedTimeSlots:[{startDateTime:"2024-11-26 10:00",endDateTime:"2024-11-26 14:00",isCrossDay:!1}]}},getPaymentInfo(){this.paymentInfo={paymentPhone:"0912345678",paymentType:"credit",payWay:"0",isPaymentPersonFilled:!0}},getBookingMode(){this.bookingMode="room"},getPassCouponInfo(){this.passCouponInfo={state:E.INITIAL,isLoading:!1}},async searchCoupon(){if(!(!this.code||!this.CAN_SEARCH)){this.isLoading=!0;try{const t=await Jt().fetchCoupon({code:this.code,ownerCode:this.orderInfo.ownerCode,roomId:this.orderInfo.roomId,planId:this.orderInfo.planId,phone:this.paymentInfo.paymentPhone,dates:this.orderInfo.bookedTimeSlots.map(s=>s.startDateTime.split(" ")[0])}),n=lo({couponRes:t,bookingMode:this.orderInfo.bookingMode,startDatetime:this.orderInfo.bookedTimeSlots[0].startDateTime,endDatetime:this.orderInfo.bookedTimeSlots[0].endDateTime});if(this.promoCodeValidation={isValid:n.isValid,errMsg:n.isValid?"":n.errorKey||""},n.isValid&&typeof t=="object"&&t){const s=fo({type:t.type,content:t.content??"",quantity:t.quantity??"",repeatable:t.repeatable??"",phone:t.phone??"",totalPrice:this.orderInfo.totalPrice,bookedUnit:this.orderInfo.bookedUnit});this.promoCouponCore.setCoupon(s),this.warnTextKey="",this.noCoupon=!1}else this.warnTextKey=n.errorKey||"unknown-error",this.noCoupon=!0}catch(e){console.error(e),this.warnTextKey="error-while-querying",this.noCoupon=!0}finally{setTimeout(()=>{this.step=2,this.isLoading=!1},500)}}},applyCoupon(){this.promoCouponCore.coupon&&(console.log("ÂÑ™ÊÉ†Âà∏Â∑≤Â•óÁî®:",{code:this.code,data:this.promoCouponCore.coupon}),this.step=3)},deleteCoupon(){this.step=1,this.code="",this.promoCouponCore.clear(),this.noCoupon=!0,this.warnTextKey="",this.promoCodeValidation={isValid:!0,errMsg:""},console.log("ÂÑ™ÊÉ†Âà∏Â∑≤Âà™Èô§")}}}),bo={class:"space-4 px-4"},yo={class:"mx-5 max-w-4xl rounded-lg border-2 bg-white p-6 shadow-lg lg:mx-auto"},Co={class:"mb-6 flex items-center gap-3"},vo={class:"text-2xl font-bold text-gray-800"},Eo={key:0,class:"ml-2 text-sm text-red-500"},Io={class:"flex flex-col gap-4 md:flex-row md:items-start"},_o={class:"flex flex-1 flex-col gap-3 md:flex-row md:items-center"},wo={class:"relative flex-1"},Do=["placeholder","readonly","disabled","tabindex"],Oo={class:"flex gap-3"},No=["disabled"],Po=["disabled"],To={key:0,class:"mt-6 flex justify-center p-3"},Ao={key:1,class:"mt-6"},Uo={key:2,class:"mt-6"},Ro={class:"my-6"},Fo=F({__name:"PromoCoupon",setup(e){const t=xo(),{code:n,promoCodeValidation:s,promoCouponCore:o,paymentInfo:i,isLoading:d,step:a,warnTextKey:c,orderInfo:l,bookingMode:h,passCouponInfo:p,SHOW_COUPON_DETAIL:x,SHOW_SEARCH_BUTTON:_,SHOW_CANCEL_BUTTON:D,IS_INCREMENT_BTN_DISABLED:m,IS_DECREMENT_BTN_DISABLED:y,CAN_SEARCH:I,PROMO_COUPON_STATE:T,USED_COUPON_INFO:B,CURRENT_USED_COUPON_CONTENT:A,CURRENT_USED_COUPON_TYPE:de}=ye(t),ce=se(()=>i.value.payWay==="1"||i.value.paymentType==="point"?"ÁÑ°ÂÑ™ÊÉ†‰ª£Á¢º No Code":"ÂÑ™ÊÉ†‰ª£Á¢º Coupon"),ue=()=>{I.value&&t.searchCoupon()},pe=()=>{t.deleteCoupon()},fe=()=>{t.applyCoupon()};return Ce(()=>{t.initDemo()}),(ge,w)=>(b(),C("div",bo,[r("div",yo,[r("div",Co,[z(Wt),r("h2",vo,[w[3]||(w[3]=r("span",null,"ÂÑ™ÊÉ†‰ª£Á¢º Coupon",-1)),u(i).paymentType==="coupon"?(b(),C("span",Eo,"*")):P("",!0)])]),w[5]||(w[5]=ve('<div class="my-6"><div class="rounded-lg bg-orange-50 p-4"><h4 class="mb-3 font-semibold text-orange-900">üìù Ê∏¨Ë©¶ÂÑ™ÊÉ†Á¢º</h4><div class="grid gap-2 text-sm md:grid-cols-2"><div><p class="font-semibold text-gray-700">ÂÖçË≤ªÂÑ™ÊÉ†Ôºö</p><p class="text-gray-600">FREE, FREE2024</p></div><div><p class="font-semibold text-gray-700">ÊäòÊâ£ÂÑ™ÊÉ†Ôºö</p><p class="text-gray-600">DISCOUNT85, SALE50, VIP70</p></div><div><p class="font-semibold text-gray-700">ÊäòÂÉπÂÑ™ÊÉ†Ôºö</p><p class="text-gray-600">REDUCE100, SUMMER200, WELCOME50</p></div><div><p class="font-semibold text-gray-700">ÊäòÊäµÊôÇÊï∏Ôºö</p><p class="text-gray-600">HALFHOUR, HOUR1, FREETIME2, FREETIME3, HALFDAY</p></div><div><p class="font-semibold text-gray-700">ÈåØË™§ÁãÄÊÖãÔºö</p><p class="text-gray-600">USED2024, EXPIRED, NEEDPHONE, LIMIT, BLOCKED</p></div></div></div></div>',1)),r("div",Io,[w[4]||(w[4]=r("label",{for:"coupon",class:"shrink-0 text-lg font-medium text-gray-700 md:w-40"},[K(" ÂÑ™ÊÉ†‰ª£Á¢º "),r("br",{class:"hidden md:block"}),K(" Coupon ")],-1)),r("div",_o,[r("div",wo,[V(r("input",{id:"coupon","onUpdate:modelValue":w[0]||(w[0]=H=>Ee(n)?n.value=H:null),type:"text",placeholder:ce.value,readonly:u(T)!=="initial",disabled:!u(I),tabindex:u(T)!=="initial"?-1:0,class:X([[u(T)!=="initial"?"pointer-events-none border-transparent bg-black/5 select-none":"",u(s).isValid?"":"border-red-500"],"w-full rounded-lg border-2 border-gray-300 px-4 py-3 text-base transition-colors focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-100 disabled:text-gray-400"])},null,10,Do),[[re,u(n)]])]),r("div",Oo,[V(r("button",{type:"button",disabled:!u(I),class:"rounded-lg bg-orange-500 px-6 py-3 font-semibold text-white shadow-md transition-all hover:bg-orange-600 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500",onClick:ue}," Search ",8,No),[[Y,u(_)]]),V(r("button",{type:"button",disabled:u(a)===1&&u(n)==="",class:"rounded-lg bg-gray-500 px-6 py-3 font-semibold text-white shadow-md transition-all hover:bg-gray-600 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500",onClick:pe}," Cancel ",8,Po),[[Y,u(D)]])])])]),u(d)?(b(),C("div",To,[z(_e,{color:"#ff6900"})])):P("",!0),u(a)===2&&!u(d)?(b(),C("div",Ao,[u(x)?(b(),Q(Je,{key:0,"usage-count":u(o).usageCount,"onUpdate:usageCount":w[1]||(w[1]=H=>u(o).usageCount=H),class:"rounded-lg bg-orange-50 p-6","is-apply-btn-disabled":u(a)===1&&u(n)==="","is-decrement-btn-disabled":u(y),"is-increment-btn-disabled":u(m),"on-click-decrement":u(o).decrement,"on-click-increment":u(o).increment,"on-click-apply":fe,text:u(A),"is-bind-phone":u(o).coupon?.isBindPhone,"is-repeatable":u(o).coupon?.isRepeatable,remain:u(o).coupon?.remain},null,8,["usage-count","is-apply-btn-disabled","is-decrement-btn-disabled","is-increment-btn-disabled","on-click-decrement","on-click-increment","text","is-bind-phone","is-repeatable","remain"])):(b(),Q(Xt,{key:1,"warn-text":u(c)?ge.$t(`coupon-warn-text.${u(c)}`):""},null,8,["warn-text"]))])):P("",!0),u(a)===3&&!u(d)?(b(),C("div",Uo,[z(Fe,{"usage-count":u(o).usageCount,"onUpdate:usageCount":w[2]||(w[2]=H=>u(o).usageCount=H),code:u(n),text:u(de),"is-repeatable":u(B)?.isRepeatable,"total-price":u(l).totalPrice,"discount-value":u(B)?.discountValue},null,8,["usage-count","code","text","is-repeatable","total-price","discount-value"])])):P("",!0)]),r("div",Ro,[z(Ft,{"order-info":u(l),"payment-info":u(i),"booking-mode":u(h),"pass-coupon-info":u(p)},null,8,["order-info","payment-info","booking-mode","pass-coupon-info"])])]))}});export{Fo as default};
